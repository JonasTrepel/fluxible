<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Function to match a dataframe of continuously measured
CO2 concentration with measurement IDs from another dataframe. Uses datetime
to tell which measurements happened when. Extra variables in both dataframes
will appear in the output."><title>Matching continously measured fluxes with measurement IDs — flux_match • fluxible</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Matching continously measured fluxes with measurement IDs — flux_match"><meta property="og:description" content="Function to match a dataframe of continuously measured
CO2 concentration with measurement IDs from another dataframe. Uses datetime
to tell which measurements happened when. Extra variables in both dataframes
will appear in the output."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">fluxible</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Matching continously measured fluxes with measurement IDs</h1>
      
      <div class="d-none name"><code>flux_match.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function to match a dataframe of continuously measured
CO2 concentration with measurement IDs from another dataframe. Uses datetime
to tell which measurements happened when. Extra variables in both dataframes
will appear in the output.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">flux_match</span><span class="op">(</span></span>
<span>  <span class="va">raw_conc</span>,</span>
<span>  <span class="va">field_record</span>,</span>
<span>  startcrop <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  measurement_length <span class="op">=</span> <span class="fl">220</span>,</span>
<span>  ratio_threshold <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  time_diff <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  datetime_col <span class="op">=</span> <span class="st">"datetime"</span>,</span>
<span>  conc_col <span class="op">=</span> <span class="st">"conc"</span>,</span>
<span>  start_col <span class="op">=</span> <span class="st">"start"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>raw_conc</dt>
<dd><p>dataframe of CO2 concentration measured continuously.
Has to contain at least a datetime column in ymd_hms format and
a gas concentration column as double.</p></dd>


<dt>field_record</dt>
<dd><p>dataframe recording which measurement happened when.
Has to contain at least a column telling at what time measurements started,
and any other column allowing for identification of measurements.</p></dd>


<dt>startcrop</dt>
<dd><p>how many seconds should be discarded at the beginning of
the measurement</p></dd>


<dt>measurement_length</dt>
<dd><p>length of the measurement (in seconds)
from the start specified in the field_record</p></dd>


<dt>ratio_threshold</dt>
<dd><p>ratio (number of concentration measurement compared to
length of measurement in seconds) below which the data should be flagged as
too little</p></dd>


<dt>time_diff</dt>
<dd><p>time difference (in seconds) between the two datasets.
Will be added to the datetime column of the raw_conc dataset</p></dd>


<dt>datetime_col</dt>
<dd><p>to specify the name of the datetime column in raw_conc
(dmy_hms format)</p></dd>


<dt>conc_col</dt>
<dd><p>to specify the name of the concentration column in raw_conc</p></dd>


<dt>start_col</dt>
<dd><p>to specify the name of the start column in field_record
(dmy_hms format)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a dataframe with concentration measurements, corresponding datetime,
flux ID, start and end of measurement, flags in case of no data or low number
of data, and any variables present in one of the inputs.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">co2_df_short</span>, <span class="va">record_short</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">flux_match</span><span class="op">(</span><span class="va">co2_df_short</span>, <span class="va">record_short</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1,251 × 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    f_datetime          temp_air temp_soil f_conc   PAR turfID       type </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 2022-07-28 <span style="color: #949494;">23:43:35</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     447. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 2022-07-28 <span style="color: #949494;">23:43:36</span>     7.22      10.9   447.  1.68 156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 2022-07-28 <span style="color: #949494;">23:43:37</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     448. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 2022-07-28 <span style="color: #949494;">23:43:38</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     449. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 2022-07-28 <span style="color: #949494;">23:43:39</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     449. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 2022-07-28 <span style="color: #949494;">23:43:40</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     450. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 2022-07-28 <span style="color: #949494;">23:43:41</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     451. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 2022-07-28 <span style="color: #949494;">23:43:42</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     451. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 2022-07-28 <span style="color: #949494;">23:43:43</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     453. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 2022-07-28 <span style="color: #949494;">23:43:44</span>    <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span>     453. <span style="color: #BB0000;">NA</span>    156 AN2C 156 ER   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1,241 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 6 more variables: f_start &lt;dttm&gt;, f_end &lt;dttm&gt;, f_fluxID &lt;fct&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   f_n_conc &lt;int&gt;, f_ratio &lt;dbl&gt;, f_flag_match &lt;chr&gt;</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Joseph Gaudard.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

